<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Unity Technologies">
  <link rel="canonical" href="https://unity-technologies.github.io/ml-agents/Python-PettingZoo-API/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting started with the PettingZoo API - Unity ML-Agents Toolkit</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting started with the PettingZoo API";
    var mkdocs_page_input_path = "Python-PettingZoo-API.md";
    var mkdocs_page_url = "/ml-agents/Python-PettingZoo-API/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Unity ML-Agents Toolkit</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Background</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Background-Machine-Learning/">Machine Learning</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Background-PyTorch/">PyTorch</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Background-Unity/">Unity</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Interfacing with Unity Builds</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">Gym API</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Python-Gym-API/">Getting started with the Gym API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Python-Gym-API-Documentation/">Gym API Documentation</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Petting Zoo API</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Getting started with the PettingZoo API</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#installation-and-examples">Installation and Examples</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#api-interface">API interface</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Python-PettingZoo-API-Documentation/">Petting Zoo Documentation</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Low-level API</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../Python-LLAPI/">Getting started with the LLAPI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Python-LLAPI-Documentation/">LLAPI Documentation</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">About</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../FAQ/">FAQs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Limitations/">Limitations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Migrating/">Migrating</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../Versioning/">Versioning</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Unity ML-Agents Toolkit</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Interfacing with Unity Builds &raquo;</li>
        
      
        
          <li>Petting Zoo API &raquo;</li>
        
      
    
    <li>Getting started with the PettingZoo API</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Unity-Technologies/ml-agents/edit/master/docs/Python-PettingZoo-API.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="unity-ml-agents-pettingzoo-wrapper">Unity ML-Agents PettingZoo Wrapper</h1>
<p>With the increasing interest in multi-agent training with a gym-like API, we provide a
PettingZoo Wrapper around the <a href="https://www.pettingzoo.ml/">Petting Zoo API</a>. Our wrapper
provides interfaces on top of our <code>UnityEnvironment</code> class, which is the default way of
interfacing with a Unity environment via Python.</p>
<h2 id="installation-and-examples">Installation and Examples</h2>
<p><a href="https://colab.research.google.com/github/Unity-Technologies/ml-agents/blob/develop-python-api-ga/ml-agents-envs/colabs/Colab_PettingZoo.ipynb">[Colab] PettingZoo Wrapper Example</a></p>
<p>This colab notebook demonstrates the example usage of the wrapper, including installation,
basic usages, and an example with our
<a href="https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Learning-Environment-Examples.md#strikers-vs-goalie">Striker vs Goalie environment</a>
which is a multi-agents environment with multiple different behavior names.</p>
<h2 id="api-interface">API interface</h2>
<p>This wrapper is compatible with PettingZoo API. Please check out
<a href="https://www.pettingzoo.ml/api">PettingZoo API page</a> for more details.
Here's an example of interacting with wrapped environment:</p>
<pre><code class="language-python">unity_env = UnityEnvironment(&quot;StrikersVsGoalie&quot;)
env = UnityToPettingZooWrapper(unity_env)
env.reset()
for agent in env.agent_iter():
    observation, reward, done, info = env.last()
    action = policy(observation, agent)
    env.step(action)
</code></pre>
<h2 id="notes">Notes</h2>
<ul>
<li>The wrapper is compatible with PettingZoo API interface but works in a little bit
  different way under the hood. Instead of stepping the environment in every <code>env.step(action)</code>,
  our environment will store the action, and will only perform environment stepping when all the
  agents requesting for actions in the current step have been assigned an action. This is for
  performance consideration that the communication between Unity and python is more efficient
  when data are sent in batches.</li>
<li>Since the actions are stored with no environment, some additional API might behave in unexpected
  way. Specifically, <code>env.reward</code> should return the instant reward in that particular step, but you
  would only see those reward when an actual environment step is performed. It's recommended that
  you follow the API definition for training (access rewards from <code>env.last()</code> instead of
  <code>env.reward</code>) and the underlying mechanism shouldn't affect training results.</li>
<li>Advanced features in PettingZoo like Parallel API is not guaranteed to work with this wrapper.</li>
<li>The environments will automatically reset when it's done, so <code>env.agent_iter(max_step)</code> will
  keep going on until the specified max step is reached (default: <code>2**63</code>). There is no need to
  call <code>env.reset()</code> except for the very beginning of instantiating an environment.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Python-PettingZoo-API-Documentation/" class="btn btn-neutral float-right" title="Petting Zoo Documentation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Python-Gym-API-Documentation/" class="btn btn-neutral" title="Gym API Documentation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>com.unity.ml-agents copyright © 2017 Unity Technologies</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Unity-Technologies/ml-agents/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../Python-Gym-API-Documentation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Python-PettingZoo-API-Documentation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
